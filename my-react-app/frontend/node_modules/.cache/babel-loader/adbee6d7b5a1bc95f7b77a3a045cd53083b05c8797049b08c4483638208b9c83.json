{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\GIGABYTE\\\\\\u0E40\\u0E14\\u0E2A\\u0E01\\u0E4C\\u0E17\\u0E47\\u0E2D\\u0E1B\\\\JOB-thaipbs\\\\my-react-app\\\\frontend\\\\src\\\\components\\\\ProtectedRoute.jsx\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport { Navigate, useLocation, Link } from \"react-router-dom\";\nimport { ShieldAlert } from \"lucide-react\";\nimport \"./ProtectedRoute.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProtectedRoute = ({\n  children,\n  allowedRoles\n}) => {\n  _s();\n  const user = JSON.parse(localStorage.getItem(\"user\"));\n  const location = useLocation();\n  if (!user) {\n    // Not logged in, redirect to login\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/login\",\n      replace: true,\n      state: {\n        from: location\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 12,\n      columnNumber: 12\n    }, this);\n  }\n  if (allowedRoles && !allowedRoles.includes(user.role)) {\n    // Logged in but role not authorized, show access denied\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"unauthorized-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"unauthorized-content\",\n        children: [/*#__PURE__*/_jsxDEV(ShieldAlert, {\n          size: 64,\n          className: \"unauthorized-icon\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 20,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Access Denied\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 21,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"\\u0E04\\u0E38\\u0E13\\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\\u0E2A\\u0E34\\u0E17\\u0E18\\u0E34\\u0E4C\\u0E40\\u0E02\\u0E49\\u0E32\\u0E16\\u0E36\\u0E07\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E19\\u0E35\\u0E49 (Role: \", user.role, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 22,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/\",\n          className: \"back-home-btn\",\n          children: \"\\u0E01\\u0E25\\u0E31\\u0E1A\\u0E2A\\u0E39\\u0E48\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E2B\\u0E25\\u0E31\\u0E01\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 23,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 19,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 18,\n      columnNumber: 7\n    }, this);\n  }\n  return children;\n};\n_s(ProtectedRoute, \"pkHmaVRPskBaU4tMJuJJpV42k1I=\", false, function () {\n  return [useLocation];\n});\n_c = ProtectedRoute;\nexport default ProtectedRoute;\nvar _c;\n$RefreshReg$(_c, \"ProtectedRoute\");","map":{"version":3,"names":["React","Navigate","useLocation","Link","ShieldAlert","jsxDEV","_jsxDEV","ProtectedRoute","children","allowedRoles","_s","user","JSON","parse","localStorage","getItem","location","to","replace","state","from","fileName","_jsxFileName","lineNumber","columnNumber","includes","role","className","size","_c","$RefreshReg$"],"sources":["C:/Users/GIGABYTE/เดสก์ท็อป/JOB-thaipbs/my-react-app/frontend/src/components/ProtectedRoute.jsx"],"sourcesContent":["import React from \"react\";\r\nimport { Navigate, useLocation, Link } from \"react-router-dom\";\r\nimport { ShieldAlert } from \"lucide-react\";\r\nimport \"./ProtectedRoute.css\";\r\n\r\nconst ProtectedRoute = ({ children, allowedRoles }) => {\r\n  const user = JSON.parse(localStorage.getItem(\"user\"));\r\n  const location = useLocation();\r\n\r\n  if (!user) {\r\n    // Not logged in, redirect to login\r\n    return <Navigate to=\"/login\" replace state={{ from: location }} />;\r\n  }\r\n\r\n  if (allowedRoles && !allowedRoles.includes(user.role)) {\r\n    // Logged in but role not authorized, show access denied\r\n    return (\r\n      <div className=\"unauthorized-container\">\r\n        <div className=\"unauthorized-content\">\r\n          <ShieldAlert size={64} className=\"unauthorized-icon\" />\r\n          <h1>Access Denied</h1>\r\n          <p>คุณไม่มีสิทธิ์เข้าถึงหน้านี้ (Role: {user.role})</p>\r\n          <Link to=\"/\" className=\"back-home-btn\">\r\n            กลับสู่หน้าหลัก\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\nexport default ProtectedRoute;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,QAAQ,EAAEC,WAAW,EAAEC,IAAI,QAAQ,kBAAkB;AAC9D,SAASC,WAAW,QAAQ,cAAc;AAC1C,OAAO,sBAAsB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE9B,MAAMC,cAAc,GAAGA,CAAC;EAAEC,QAAQ;EAAEC;AAAa,CAAC,KAAK;EAAAC,EAAA;EACrD,MAAMC,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC;EACrD,MAAMC,QAAQ,GAAGd,WAAW,CAAC,CAAC;EAE9B,IAAI,CAACS,IAAI,EAAE;IACT;IACA,oBAAOL,OAAA,CAACL,QAAQ;MAACgB,EAAE,EAAC,QAAQ;MAACC,OAAO;MAACC,KAAK,EAAE;QAAEC,IAAI,EAAEJ;MAAS;IAAE;MAAAK,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EACpE;EAEA,IAAIf,YAAY,IAAI,CAACA,YAAY,CAACgB,QAAQ,CAACd,IAAI,CAACe,IAAI,CAAC,EAAE;IACrD;IACA,oBACEpB,OAAA;MAAKqB,SAAS,EAAC,wBAAwB;MAAAnB,QAAA,eACrCF,OAAA;QAAKqB,SAAS,EAAC,sBAAsB;QAAAnB,QAAA,gBACnCF,OAAA,CAACF,WAAW;UAACwB,IAAI,EAAE,EAAG;UAACD,SAAS,EAAC;QAAmB;UAAAN,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,eACvDlB,OAAA;UAAAE,QAAA,EAAI;QAAa;UAAAa,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACtBlB,OAAA;UAAAE,QAAA,GAAG,kLAAoC,EAACG,IAAI,CAACe,IAAI,EAAC,GAAC;QAAA;UAAAL,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC,eACvDlB,OAAA,CAACH,IAAI;UAACc,EAAE,EAAC,GAAG;UAACU,SAAS,EAAC,eAAe;UAAAnB,QAAA,EAAC;QAEvC;UAAAa,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACJ;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAEV;EAEA,OAAOhB,QAAQ;AACjB,CAAC;AAACE,EAAA,CA1BIH,cAAc;EAAA,QAEDL,WAAW;AAAA;AAAA2B,EAAA,GAFxBtB,cAAc;AA4BpB,eAAeA,cAAc;AAAC,IAAAsB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}